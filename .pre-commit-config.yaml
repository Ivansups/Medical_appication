repos:
  # Базовые хуки для Git
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v3.4.0
    hooks:
      - id: check-yaml
      - id: end-of-file-fixer
      - id: trailing-whitespace  # ИСПРАВЛЕНО: было trailing-whtespace
      - id: check-added-large-files

  # Форматирование кода с black
  - repo: https://github.com/psf/black
    rev: 23.12.1
    hooks:
      - id: black
        args: [--line-length=119]

  # Проверка стиля кода с flake8
  - repo: https://github.com/PyCQA/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        args: [--max-line-length=119, "--extend-ignore=E203,E501"]
        exclude: ^(venv/|build/|\.git/)
        additional_dependencies: [flake8-bugbear]

  # Сортировка импортов
  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        args: ["--profile", "black", "--line-length=119"]

  # Запуск ваших тестов
  - repo: local
    hooks:
      - id: run-unit-tests
        name: Run Unit Tests
        entry: python -m pytest tests/Unit_test.py -v
        language: system
        pass_filenames: false  # ИСПРАВЛЕНО: было pass_filename
        always_run: true

      - id: run-gui-tests
        name: Run GUI Tests
        entry: python -m pytest tests/GIU_tests.py -v  # ИСПРАВЛЕНО: было GUL_tests
        language: system
        pass_filenames: false  # ИСПРАВЛЕНО: было pass_filename
        always_run: true
        stages: [manual]  # GUI тесты можно запускать вручную
